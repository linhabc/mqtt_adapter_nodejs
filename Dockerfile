FROM node:14-alpine

ENV ADAPTER_MQTT_PORT=1881

ENV MAINFLUX_HOST="mqtt://host.docker.internal:1883"

ENV USER_NAME_DEFAULT="394d1824-e86d-429a-9213-be9b10a82f3b"
ENV PASSWORD_DEFAULT="c46e7735-d5dc-4346-aa00-21177795b008"
ENV CHANNEL_DEFAULT="/channels/cd0d0307-9039-4a13-adb3-31d6d67a4787/messages"

# ENV REDIS_HOST="host.docker.internal"
# ENV REDIS_PORT="6379"

ENV REDIS_SENTINEL_1 = "127.0.0.1"
ENV REDIS_SENTINEL_PORT_1 = "6379"
ENV REDIS_SENTINEL_2 = "127.0.0.1"
ENV REDIS_SENTINEL_PORT_2 = "6379"
ENV REDIS_SENTINEL_3 = "127.0.0.1"
ENV REDIS_SENTINEL_PORT_3 = "6379"

WORKDIR /usr/src/app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 1881
CMD [ "node", "index.js" ]